1 NoSQL
	likes(idlike, idsong, email)
	comments(idcomment, idsong, email, comment, commentdate)
	genres(idgenre, title)
	artists(idartist, name)
	albums(idalbum, title)
	songs(idsong, idalbum, idgenre)
	atoa(idatoa, idartist, idalbum)
	recommend(idrecommend, email, idsong)

2 HIVE
	profiles(email, name, surname, birthday, gender, pass)

3 HDFS
	songs(idsong, namefile, idartist, title, year)

4 SQL
	external tables


beeline

!connect jdbc:hive2://localhost:10000
oracle
welcome1
create table profiles(email string, name string, surname string, birthday string, gender int, pass string, group string);
!quit

java -Xmx256m -Xms256m -jar $KVHOME/lib/kvstore.jar kvlite
java -jar $KVHOME/lib/kvstore.jar runadmin -port 5000 -host bigdatalite.localdomain

connect store -name kvstore
execute 'Create table likes(idlike integer, idsong string, email string, primary key(idlike))'
execute 'Create table comments(idcomment integer, idsong string, email string, body string, commentdate string, primary key(idcomment))'
execute 'CREATE TABLE genres(idgenre integer, title string, primary key(idgenre))'
execute 'CREATE TABLE artists(idartist integer, name string, primary key(idartist))'
execute 'CREATE TABLE albums(idalbum integer, title string, primary key(idalbum))'
execute 'CREATE TABLE songs(idsong integer, idalbum integer, idgenre integer, primary key(idsong))'
execute 'CREATE TABLE atoa(idatoa integer, idartist integer, idalbum integer, primary key(idatoa))'

hdfs dfs -mkdir /music
hdfs dfs -put songs.txt /music
hdfs dfs -ls /music

-- SQL
sqlplus / as sysdba

startup
connect system/welcome1

CREATE TABLE profiles_ext (
	email varchar2(255),
	name varchar2(40),
	surname varchar2(40),
	birthday varchar2(10),
	gender number(1),
	pass varchar2(255)
)
ORGANIZATION EXTERNAL (
	TYPE ORACLE_HIVE
	DEFAULT DIRECTORY ORACLE_BIGDATA_CONFIG
	ACCESS PARAMETERS
	(
		com.oracle.bigdata.tablename=default.profiles
	)
)
REJECT LIMIT UNLIMITED;

CREATE TABLE songs_hadoop_ext (
	idsong varchar2(255),
	namefile varchar2(255),
	idartist int,
	title varchar2(255),
	year number(4)
)
ORGANIZATION EXTERNAL (
	TYPE ORACLE_HDFS
	DEFAULT DIRECTORY ORACLE_BIGDATA_CONFIG
	ACCESS PARAMETERS (
		com.oracle.bigdata.fileformat:TEXTFILE
		com.oracle.bigdata.overflow:{"action":"truncate"}
		com.oracle.bigdata.erroropt:{"action":"setnull"}
		ROW FORMAT DELIMITED FIELDS TERMINATED BY '|'
	)
	LOCATION ('hdfs:/music/songs.txt')
);

exit

lsnrctl
start
exit
